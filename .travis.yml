language: cpp
sudo: false
matrix:
  include:
  - os: linux
    compiler: gcc
    addons:
      apt:
        packages:
        - liblog4cxx10-dev
        - libboost-program-options-dev
        - libboost-filesystem-dev
        - libboost-date-time-dev
        - libboost-dev
        - libboost-system-dev
        - libboost-test-dev
        - libboost-thread-dev
        - libzmq3-dev
        - libpcap-dev
        - libboost-regex-dev
    env: HDF5_ROOT=$HOME/hdf5-1.10.1 INSTALL_PREFIX=$HOME/install_prefix ODIN_PREFIX=$HOME/odin-data
      BLOSC_ROOT=$HOME/c-blosc-1.14.2 KAFKA_ROOT=$HOME/librdkafka-1.0.0
    before_install:
    - bash .travis-install-blosc.sh
    - bash .travis-install-librdkafka.sh
    - bash .travis-install-hdf5.sh
    - bash .travis-install-odin.sh
install:
- git fetch --depth=500
- mkdir -p build
- mkdir -p $INSTALL_PREFIX
- cd build;
- cmake -DCMAKE_INSTALL_RPATH_USE_LINK_PATH=ON -DBoost_NO_BOOST_CMAKE=ON -DCMAKE_INSTALL_PREFIX=$INSTALL_PREFIX
  -DODINDATA_ROOT_DIR=$ODIN_PREFIX ../data;
- cmake --build . --target install;
- cd ..
script:
#- "${ODIN_PREFIX}/bin/odinDataTest --json=${INSTALL_PREFIX}/test_config/excalibur.json"
- ls -l $INSTALL_PREFIX
after_success:
- coveralls
notifications:
  slack:
    secure: Ww4CjTfw+nHdMjk58vGEipmrrPrMM92KQqrMHPShWyLDF40RqxM0f7Bg8dz+d/WJPSIzeH/dRi6o7MuesmPZtrwCgSHmRQAVhiWkVXMG2U1wfxB0rMejkKtBK4UNqm1zV6+yTVbdZYGrn7YldFlYBC+MoQDbieVn+ADU1PiaHkqmDfVsRw7rwKBhA9d6so911ZpLyO4cH1DOxGS2K0sGZljnFL7q9M4Y99d1oT06vhOUnOCfh/PQM29nib9csBAfZZa3WeIMyZZtVz13iQqXDoKJNDJIgrMnO0TeCRGu5EghIjKzMHcvHxzsAoBgWSAA7Tr7urhJo8QWIXxGq0xa7820IZpZJjhG/mYGLy4nHsqXiR7Wx6i6ulJcBl0KZ8oXzfBQksQcs49Gi2vgeAhfKfXXpsR7N5meVgiONgEfS4c3ji8ApZF4UpzP7SUrNk4SYBtDufFI6xlI8H371w2gXE4KPAsJ4XxBpdYmdQhDq03ZxLVXsjSwLVW3fBGn5YjbCgGCkQhX9YCiWdVnXDGHSw3mxfU+UV+2PjumvIniGDp6PCq5CIguyNXJiDUS5S+VtFL1hOwgwr8HM8pl3FEt7bs1ARrGOLTV58sntnxodq9L8lYCNNASqGhIOVTNQd3c4TWjuys5s6R42GL8VH0VGcrXnPfK9daHgO3QAHFbNxc=