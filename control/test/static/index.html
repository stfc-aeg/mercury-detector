<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <title>ODIN Server</title>

        <!-- Bootstrap -->
        <!-- <link href="js/bootstrap-4.5.2-dist/css/bootstrap.min.css" rel="stylesheet"> -->
        <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.6/dist/css/bootstrap.min.css" rel="stylesheet"> -->
	    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/4.0.0-alpha.1/css/bootstrap-switch.min.css">

        <link href="css/carrier.css" rel="stylesheet">

        <div id="global-nav"></div>

    </head>
    <body>

        <!-- <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
            <div class="navbar-nav">
                    <a class="navbar-brand" href="#">ODIN</a>
                    <li class="nav-item">
                        <a class="nav-link" href="sequencer.html">Sequencer</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Carrier PCB Control</a>
                    </li>
            </div>
        </nav> -->

        <h1 class="text-center">MERCURY Carrier Control</h1>

        <div class="container-fluid">            
                <ul class="nav nav-tabs" role="tablist">
                    <!-- <li class="nav-item"><a class="nav-link active" aria-selected="True"    data-bs-toggle="tab" type="button" role="tab" aria-controls="home" data-bs-target="#home">Home</a></li>   -->
                    <!-- <li class="nav-item"><a class="nav-link active" aria-selected="True"    data-bs-toggle="tab" type="button" role="tab" aria-controls="sequencer.html" data-bs-target="sequencer.html">Home</a></li>   -->
                    <li class="nav-link"><a class="nav-link active" aria-selected="True"    data-bs-toggle="tab" type="button" role="tab" aria-controls="pcbcontrol" data-bs-target="#pcbcontrol">PCB Control</a></li>
                    <li class="nav-link"><a class="nav-link" aria-selected="False"          data-bs-toggle="tab" type="button" role="tab" aria-controls="about" data-bs-target="#about">About></li>
                    <li class="nav-link"><a class="nav-link" aria-selected="False"          data-bs-toggle="tab" type="button" role="tab" aria-controls="contact" data-bs-target="#contact">Contact</a></li>
                </ul>
        </div>

        <div class="tab-content">
            <!-- <div class="tab-pane fade" id="home" role="tabpanel">
                <h2 class="text-center">Home</h2>
                <a data-toggle="tab" href="#pcbcontrol">PCB Control</a>
            </div> -->

            <div class="tab-pane fade show active" id="pcbcontrol" role="tabpanel">
                <h2 class="text-center">MERCURY PCB Control</h2>

                <div class="container-fluid">

                    <div class="row contflex">
                        <div class="col-md-2 well">
                            <div class="row">
                                <p class="lead text-center">System Temperatures</p>
                            </div>
                            <div class="row contflex">
                                <div class="col-md-11">
                                    <table class="table table-striped" style="width=100%">
                                        <thead>
                                            <tr>
                                                <th>Sensor</th>
                                                <th>Temp (C)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Ambient</td>
                                                <td><span id="temp-ambient">&nbsp;</span></td>
                                            </tr>
                                            <tr>
                                                <td>FireFly 1</td>
                                                <td><span id="temp-firefly1">&nbsp;</span></td>
                                            </tr>
                                            <tr>
                                                <td>FireFly 2</td>
                                                <td><span id="temp-firefly2">&nbsp;</span></td>
                                            </tr>
                                            <tr>
                                                <td>PT100</td>
                                                <td><span id="temp-pt100">&nbsp;</span></td>
                                            </tr>
                                            <tr>
                                                <td>ASIC TEMP1</td>
                                                <td><span id="temp-asic-1">&nbsp;</span></td>
                                            </tr>
                                            <tr>
                                                <td>ASIC TEMP2</td>
                                                <td><span id="temp-asic-2">&nbsp;</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div> <!-- col-md-2 -->

                        <div class="col-md-7 well">
                            <div class="row">
                                <p class="lead text-center">System Power Rails</p>
                            </div>
                            <div class="row contflex">
                                <div class="col-md-5">
                                    <table class="table table-striped"style="width=100%">
                                        <thead>
                                            <tr>
                                                <th>Rail</th>
                                                <th>Power (W)</th>
                                                <th>Voltage (V)</th>
                                                <th>Current (A)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Analogue</td>
                                                <td><span id="psu-analogue-pwr"></span></td>
                                                <td><span id="psu-analogue-vol"></span></td>
                                                <td><span id="psu-analogue-cur"></span></td>
                                            </tr>
                                            <tr>
                                                <td>Digital</td>
                                                <td><span id="psu-dig-pwr"></span></td>
                                                <td><span id="psu-dig-vol"></span></td>
                                                <td><span id="psu-dig-cur"></span></td>
                                            </tr>
                                            <tr>
                                                <td>Digital Control</td>
                                                <td><span id="psu-dig-ctrl-pwr"></span></td>
                                                <td><span id="psu-dig-ctrl-vol"></span></td>
                                                <td><span id="psu-dig-ctrl-cur"></span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div> <!-- col -->
                                <div class="col-md-5">
                                    <div class="row">
                                        <h4>Voltage</h4>
                                        <canvas id="voltage-chart"></canvas>
                                    </div>
                                    <div class="row">
                                        <h4>Current</h4>
                                        <canvas id="current-chart"></canvas>
                                    </div>
                                </div> <!-- col -->
                            </div> <!-- row -->
                        </div> <!-- col-md-4 -->

                        <div class="col-md-2 well">
                            <div class="row">
                                <p class="lead text-center">Board Control</p>
                            </div> <!-- row -->
                            <div class="row contflex">
                                <div class="col-md-11">
                                    <p>VCAL Voltage: <span id="vcal-voltage">&nbsp;</span>v</p>
                                    <p><input type="number" id="vcal-input"/></p>
                                    <p><input type="button" value="Update" id="vcal-submit" onclick="change_vcal()"/></p>
                                </div> <!-- col-md-11 -->
                            </div> <!-- row -->
                            <div class="row contflex">
                                <div class="col-md-11">
                                    <p>Regulator Power Control: <span id="vreg-cycle">&nbsp;</span>v</p>
                                    <p><input type="button" value="Power Cycle VREG EN" id="vreg-cycle-submit" onclick="run_vreg_cycle()"/></p>
                                </div> <!-- col-md-11 -->
                            </div> <!-- row -->
                        </div> <!-- vol-md-2 -->

                    </div> <!-- row -->

                    <div class="row contflex">
                        <div class="col-md-11 well">
                            <div class="row">
                                <h3 class="text-center">FireFly Channel Control</h3>
                            </div>
                            <div class="row contflex">
                                <div class="col-md-5">
                                    <div id='ff1_chtable'></div>
                                </div> <!-- col-md-6 -->

                                <div class="col-md-5">
                                    <div id='ff2_chtable'></div>
                                </div> <!-- col-md-6 -->
                            </div> <!-- row -->
                        </div> <!-- col-md-11 -->
                    </div> <!-- row -->

                </div><!-- container fluid-container -->
            </div>

            <div class="tab-pane fade" id="about" role="tabpanel">
                <h2 class="text-center">About</h2>
                <div class="container-fluid">
                    <h3 class="text-center">API Information</h3>
                    <p>API version is:&nbsp;<span id="api-version">&nbsp;</span></p>
                    <p>Registered API adapters:&nbsp;<span id="api-adapters">&nbsp;</span></p>
                </div>

            </div>

            <div class="tab-pane fade" id="contact" role="tabpanel">
                Contact
            </div>
        </div>

        <script src="js/global-nav.js"></script>
        <script>
            var nav = get_navbar('index.html');
            var demo = document.getElementById('global-nav'); // target element.
            demo.insertAdjacentHTML('beforeend', nav);
        </script>

        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <!-- <script src="js/jquery-2.2.3.min.js"></script> -->
        <script
              src="https://code.jquery.com/jquery-2.2.3.min.js"
        ></script>

        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <!-- <script src="js/bootstrap-4.5.2-dist/js/bootstrap.min.js"></script> -->
        <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.6/dist/js/bootstrap.min.js"></script> -->
	    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/4.0.0-alpha.1/js/bootstrap-switch.min.js"></script>

	<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.7.0/moment.min.js" type="text/javascript"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

        <script src="js/carrier.js"></script>

    </body>
</html>
